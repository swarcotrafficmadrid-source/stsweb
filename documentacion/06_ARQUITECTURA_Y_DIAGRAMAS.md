# ğŸ—ï¸ ARQUITECTURA Y DIAGRAMAS - SISTEMA STM WEB

**DiseÃ±o TÃ©cnico y Visualizaciones**  
**SWARCO Traffic Spain**  
**VersiÃ³n 3.0 - Enero 2026**

---

## ğŸ“ ARQUITECTURA GENERAL DEL SISTEMA

### Diagrama de Alto Nivel:

```
                         INTERNET
                            â”‚
                            â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                       â”‚
        â”‚       GOOGLE CLOUD PLATFORM           â”‚
        â”‚                                       â”‚
        â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
        â”‚   â”‚   CLOUD LOAD BALANCER           â”‚ â”‚
        â”‚   â”‚   (DistribuciÃ³n de TrÃ¡fico)     â”‚ â”‚
        â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
        â”‚              â”‚                         â”‚
        â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
        â”‚   â”‚                     â”‚             â”‚
        â”‚   â–¼                     â–¼             â”‚
        â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
        â”‚ â”‚              â”‚  â”‚              â”‚   â”‚
        â”‚ â”‚  FRONTEND    â”‚  â”‚   BACKEND    â”‚   â”‚
        â”‚ â”‚  Cloud Run   â”‚  â”‚  Cloud Run   â”‚   â”‚
        â”‚ â”‚              â”‚  â”‚              â”‚   â”‚
        â”‚ â”‚  React/Vite  â”‚  â”‚ Node.js/     â”‚   â”‚
        â”‚ â”‚  Nginx       â”‚  â”‚ Express      â”‚   â”‚
        â”‚ â”‚              â”‚  â”‚              â”‚   â”‚
        â”‚ â”‚  Container   â”‚  â”‚  Container   â”‚   â”‚
        â”‚ â”‚  â”€â”€â”€â”€â”€â”€â”€â”€    â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€    â”‚   â”‚
        â”‚ â”‚  Min: 0      â”‚  â”‚  Min: 1      â”‚   â”‚
        â”‚ â”‚  Max: 10     â”‚  â”‚  Max: 20     â”‚   â”‚
        â”‚ â”‚              â”‚  â”‚              â”‚   â”‚
        â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
        â”‚                          â”‚           â”‚
        â”‚                          â–¼           â”‚
        â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
        â”‚              â”‚                   â”‚   â”‚
        â”‚              â”‚   CLOUD SQL       â”‚   â”‚
        â”‚              â”‚   (MariaDB 10.6)  â”‚   â”‚
        â”‚              â”‚                   â”‚   â”‚
        â”‚              â”‚  Backups: Diarios â”‚   â”‚
        â”‚              â”‚  Storage: 10 GB   â”‚   â”‚
        â”‚              â”‚  HA: No (single)  â”‚   â”‚
        â”‚              â”‚                   â”‚   â”‚
        â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
        â”‚                                       â”‚
        â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
        â”‚   â”‚   SERVICIOS EXTERNOS            â”‚ â”‚
        â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
        â”‚   â”‚ â€¢ OpenAI API (GPT-4)            â”‚ â”‚
        â”‚   â”‚ â€¢ Google Maps API               â”‚ â”‚
        â”‚   â”‚ â€¢ Cloud Logging                 â”‚ â”‚
        â”‚   â”‚ â€¢ Cloud Monitoring              â”‚ â”‚
        â”‚   â”‚ â€¢ Cloud Storage (archivos)      â”‚ â”‚
        â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
        â”‚                                       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸŒŠ FLUJO DE DATOS

### AutenticaciÃ³n (Login):

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          â”‚   1. POST /api/auth/login             â”‚          â”‚
â”‚  CLIENT  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ FRONTEND â”‚
â”‚ (Browser)â”‚   { email, password }                 â”‚ (React)  â”‚
â”‚          â”‚                                        â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                                         â”‚
                                         2. Valida formato
                                         3. EnvÃ­a a backend
                                                         â”‚
                                                         â–¼
                                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                  â”‚          â”‚
                                                  â”‚ BACKEND  â”‚
                                                  â”‚(Node.js) â”‚
                                                  â”‚          â”‚
                                                  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                                       â”‚
                                        4. Busca usuario en BD
                                                       â”‚
                                                       â–¼
                                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                               â”‚               â”‚
                                               â”‚   DATABASE    â”‚
                                               â”‚   (MariaDB)   â”‚
                                               â”‚               â”‚
                                               â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                                       â”‚
                                       5. Retorna datos usuario
                                                       â”‚
                                                       â–¼
                                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                  â”‚ BACKEND  â”‚
                                                  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                                       â”‚
                                     6. Verifica password (bcrypt)
                                     7. Genera JWT token
                                                       â”‚
                                                       â–¼
                                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                  â”‚ FRONTEND â”‚
                                                  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                                       â”‚
                                         8. Guarda token localStorage
                                         9. Redirige a Dashboard
                                                       â”‚
                                                       â–¼
                                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                  â”‚  CLIENT  â”‚
                                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Crear Ticket:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CLIENT  â”‚   1. Rellena formulario               â”‚ FRONTEND â”‚
â”‚          â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚          â”‚
â”‚          â”‚   {title, desc, priority, location}   â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                                         â”‚
                                            2. ValidaciÃ³n cliente
                                            3. Captura GPS (si auto)
                                                         â”‚
                                                         â–¼
                                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                            â”‚  Google Maps API  â”‚
                                            â”‚  Geocoding        â”‚
                                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                      â”‚
                                       4. Coordenadas â†’ DirecciÃ³n
                                                      â”‚
                                                      â–¼
                                                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                â”‚ FRONTEND â”‚
                                                â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                                     â”‚
                                5. POST /api/tickets/create
                                   + Authorization: Bearer [token]
                                                     â”‚
                                                     â–¼
                                                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                â”‚ BACKEND  â”‚
                                                â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                                     â”‚
                                      6. Verifica JWT token
                                      7. Valida datos servidor
                                      8. Rate limiting check
                                                     â”‚
                                                     â–¼
                                             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                             â”‚   DATABASE    â”‚
                                             â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                                     â”‚
                            9. INSERT INTO tickets (...) VALUES (...)
                            10. Retorna ticket con ID generado
                                                     â”‚
                                                     â–¼
                                                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                â”‚ BACKEND  â”‚
                                                â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                                     â”‚
                                        11. Crea entrada historial
                                        12. EnvÃ­a notificaciones
                                                     â”‚
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â–¼                â–¼                â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚  Email  â”‚    â”‚   Push   â”‚    â”‚Analytics â”‚
                              â”‚ Service â”‚    â”‚Notif API â”‚    â”‚  Update  â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                     â”‚
                                                     â–¼
                                                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                â”‚ FRONTEND â”‚
                                                â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                                     â”‚
                                        13. Muestra confirmaciÃ³n
                                        14. Actualiza lista tickets
                                                     â”‚
                                                     â–¼
                                                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                â”‚  CLIENT  â”‚
                                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Chatbot IA:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CLIENT  â”‚   1. Escribe mensaje                  â”‚ FRONTEND â”‚
â”‚          â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚          â”‚
â”‚          â”‚   "Â¿CuÃ¡nto tarda en repararse?"       â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                                         â”‚
                                           2. Rate limit check
                                              (1s cooldown)
                                                         â”‚
                                                         â–¼
                                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                    â”‚ BACKEND  â”‚
                                                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                                         â”‚
                                         3. Verifica JWT token
                                         4. Rate limit check (30/hora)
                                                         â”‚
                                                         â–¼
                                                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                 â”‚   DATABASE    â”‚
                                                 â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                                         â”‚
                                  5. Busca contexto del ticket
                                  6. Historial de conversaciÃ³n
                                                         â”‚
                                                         â–¼
                                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                    â”‚ BACKEND  â”‚
                                                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                                         â”‚
                                         7. Construye prompt:
                                            "Usuario pregunta sobre
                                            ticket #1025: SemÃ¡foro...
                                            Pregunta: Â¿CuÃ¡nto tarda?"
                                                         â”‚
                                                         â–¼
                                                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                â”‚  OpenAI API    â”‚
                                                â”‚    (GPT-4)     â”‚
                                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                                         â”‚
                                         8. Procesa con IA
                                         9. Genera respuesta
                                                         â”‚
                                                         â–¼
                                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                    â”‚ BACKEND  â”‚
                                                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                                         â”‚
                                          10. Formatea respuesta
                                          11. Guarda en historial
                                          12. Retorna al frontend
                                                         â”‚
                                                         â–¼
                                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                    â”‚ FRONTEND â”‚
                                                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                                         â”‚
                                              13. Muestra en chat
                                              14. Actualiza UI
                                                         â”‚
                                                         â–¼
                                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                    â”‚  CLIENT  â”‚
                                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š MODELO DE DATOS (BASE DE DATOS)

### Diagrama Entidad-RelaciÃ³n:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        USERS            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK  id (INT)            â”‚
â”‚     email (VARCHAR)     â”‚â”€â”
â”‚     password (VARCHAR)  â”‚ â”‚
â”‚     name (VARCHAR)      â”‚ â”‚
â”‚     role (ENUM)         â”‚ â”‚
â”‚     created_at          â”‚ â”‚
â”‚     updated_at          â”‚ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
            â”‚               â”‚
            â”‚ 1:N           â”‚
            â–¼               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚       TICKETS           â”‚ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ PK  id (INT)            â”‚ â”‚
â”‚     title (VARCHAR)     â”‚ â”‚
â”‚     description (TEXT)  â”‚ â”‚
â”‚     status (ENUM)       â”‚ â”‚
â”‚     priority (ENUM)     â”‚ â”‚
â”‚     location (VARCHAR)  â”‚ â”‚
â”‚ FK  created_by (INT)â”€â”€â”€â”€â”¼â”€â”˜
â”‚ FK  assigned_to (INT)â”€â”€â”€â”¼â”€â”
â”‚     created_at          â”‚ â”‚
â”‚     updated_at          â”‚ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
         â”‚                  â”‚
         â”‚ 1:N              â”‚ 1:N
         â–¼                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   TICKET_COMMENTS       â”‚ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ PK  id (INT)            â”‚ â”‚
â”‚ FK  ticket_id (INT)â”€â”€â”€â”€â”€â”¼â”€â”˜
â”‚ FK  user_id (INT)â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”
â”‚     comment (TEXT)      â”‚   â”‚
â”‚     created_at          â”‚   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                              â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   TICKET_HISTORY        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PK  id (INT)            â”‚
â”‚ FK  ticket_id (INT)     â”‚
â”‚ FK  user_id (INT)       â”‚
â”‚     action (VARCHAR)    â”‚
â”‚     old_value (TEXT)    â”‚
â”‚     new_value (TEXT)    â”‚
â”‚     created_at          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Estados y Transiciones:

```
DIAGRAMA DE ESTADOS DEL TICKET
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚   PENDIENTE      â”‚â—„â”€â”€â”€â”€â”€â”€ Ticket creado
       â”‚  (Sin asignar)   â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”‚ Admin/SAT asigna
                â”‚
                â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚   ASIGNADO       â”‚
       â”‚ (TÃ©cnico elegido)â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”‚ SAT inicia trabajo
                â”‚
                â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚  EN PROGRESO     â”‚â—„â”€â”€â”
       â”‚  (Reparando...)  â”‚   â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                â”‚              â”‚
                â”‚ Espera       â”‚
                â”‚ materiales?  â”‚
                â”‚              â”‚
                â–¼              â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
       â”‚   EN ESPERA      â”‚â”€â”€â”€â”˜
       â”‚(Esperando algo)  â”‚ ContinÃºa
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”‚ SAT completa
                â”‚
                â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚   COMPLETADO     â”‚
       â”‚   (Resuelto âœ…)  â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

       TAMBIÃ‰N POSIBLE:

       Desde CUALQUIER estado:
                â”‚
                â”‚ Usuario/Admin cancela
                â”‚
                â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚   CANCELADO      â”‚
       â”‚  (Anulado âŒ)    â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” ARQUITECTURA DE SEGURIDAD

### Capas de Seguridad:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CAPA 1: TRANSPORTE                                         â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                       â”‚
â”‚                                                             â”‚
â”‚  âœ… HTTPS/TLS 1.3                                           â”‚
â”‚  âœ… Certificado SSL vÃ¡lido (Google Trust Services)          â”‚
â”‚  âœ… Cifrado end-to-end                                      â”‚
â”‚  âœ… HSTS (HTTP Strict Transport Security)                   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CAPA 2: AUTENTICACIÃ“N                                      â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                    â”‚
â”‚                                                             â”‚
â”‚  âœ… JWT (JSON Web Tokens)                                   â”‚
â”‚     â€¢ Header: { "alg": "HS256", "typ": "JWT" }              â”‚
â”‚     â€¢ Payload: { "id": 5, "email": "...", "role": "..." }   â”‚
â”‚     â€¢ Signature: HMACSHA256(header + payload + SECRET)      â”‚
â”‚  âœ… Token expira en 24 horas                                â”‚
â”‚  âœ… Secret key seguro (JWT_SECRET)                          â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CAPA 3: AUTORIZACIÃ“N                                       â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                     â”‚
â”‚                                                             â”‚
â”‚  âœ… Middleware requireAuth:                                 â”‚
â”‚     1. Extrae token del header                              â”‚
â”‚     2. Verifica firma JWT                                   â”‚
â”‚     3. Comprueba expiraciÃ³n                                 â”‚
â”‚     4. Adjunta user a req.user                              â”‚
â”‚                                                             â”‚
â”‚  âœ… Middleware requireRole:                                 â”‚
â”‚     if (user.role !== 'admin') return 403 Forbidden         â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CAPA 4: RATE LIMITING                                      â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                    â”‚
â”‚                                                             â”‚
â”‚  âœ… In-Memory Rate Limiter:                                 â”‚
â”‚     â€¢ Login: 5 intentos / 15 min                            â”‚
â”‚     â€¢ Create Ticket: 10 / hora                              â”‚
â”‚     â€¢ Chatbot: 30 mensajes / hora                           â”‚
â”‚     â€¢ API General: 100 requests / 15 min                    â”‚
â”‚                                                             â”‚
â”‚  âš ï¸ LIMITACIÃ“N: No distribuido, se satura con stress test   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CAPA 5: VALIDACIÃ“N DE DATOS                                â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                              â”‚
â”‚                                                             â”‚
â”‚  âœ… ValidaciÃ³n Cliente (Frontend):                          â”‚
â”‚     â€¢ React Hook Form                                       â”‚
â”‚     â€¢ ValidaciÃ³n en tiempo real                             â”‚
â”‚                                                             â”‚
â”‚  âœ… ValidaciÃ³n Servidor (Backend):                          â”‚
â”‚     â€¢ Express Validator                                     â”‚
â”‚     â€¢ SanitizaciÃ³n de inputs                                â”‚
â”‚     â€¢ PrevenciÃ³n SQL Injection (Sequelize ORM)              â”‚
â”‚     â€¢ PrevenciÃ³n XSS                                        â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CAPA 6: BASE DE DATOS                                      â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                    â”‚
â”‚                                                             â”‚
â”‚  âœ… Passwords hasheados (bcrypt, salt rounds: 10)           â”‚
â”‚  âœ… Sequelize ORM (previene SQL Injection)                  â”‚
â”‚  âœ… ConexiÃ³n via Unix Socket (Cloud SQL)                    â”‚
â”‚  âœ… Backups automÃ¡ticos diarios                             â”‚
â”‚  âœ… EncriptaciÃ³n at-rest                                    â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ ARQUITECTURA DE DEPLOYMENT

### CI/CD Pipeline (Cloud Build):

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        CI/CD PIPELINE                         â”‚
â”‚                   (Google Cloud Build)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

         DESARROLLADOR
              â”‚
              â”‚ git push
              â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚  GitHub Repo  â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”‚ Webhook
              â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Cloud Build Trigger   â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ Inicia build automÃ¡tico
           â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   BUILD STEP 1         â”‚
  â”‚   â•â•â•â•â•â•â•â•â•â•â•          â”‚
  â”‚   git clone            â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   BUILD STEP 2         â”‚
  â”‚   â•â•â•â•â•â•â•â•â•â•â•          â”‚
  â”‚   npm install          â”‚
  â”‚   (instalar deps)      â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   BUILD STEP 3         â”‚
  â”‚   â•â•â•â•â•â•â•â•â•â•â•          â”‚
  â”‚   npm run build        â”‚
  â”‚   (compilar app)       â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   BUILD STEP 4         â”‚
  â”‚   â•â•â•â•â•â•â•â•â•â•â•          â”‚
  â”‚   docker build         â”‚
  â”‚   (crear imagen)       â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   BUILD STEP 5         â”‚
  â”‚   â•â•â•â•â•â•â•â•â•â•â•          â”‚
  â”‚   docker push          â”‚
  â”‚   (subir a registry)   â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   BUILD STEP 6         â”‚
  â”‚   â•â•â•â•â•â•â•â•â•â•â•          â”‚
  â”‚   gcloud run deploy    â”‚
  â”‚   (desplegar)          â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ Cloud Run    â”‚        â”‚ Cloud Run    â”‚
      â”‚ Frontend     â”‚        â”‚ Backend      â”‚
      â”‚ NEW REVISION â”‚        â”‚ NEW REVISION â”‚
      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                       â”‚
             â”‚ Traffic Splitting     â”‚
             â”‚ (0% â†’ 100% gradual)   â”‚
             â”‚                       â”‚
             â–¼                       â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ OLD REVISION â”‚        â”‚ OLD REVISION â”‚
      â”‚ (100% â†’ 0%)  â”‚        â”‚ (100% â†’ 0%)  â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                       â”‚
             â”‚ Si todo OK:           â”‚
             â”‚ DELETE old revision   â”‚
             â–¼                       â–¼
         [SUCCESS âœ…]           [SUCCESS âœ…]
```

### Dockerfile (Ejemplo Backend):

```dockerfile
FROM node:18-alpine

WORKDIR /app

# Copiar package files
COPY package*.json ./

# Instalar dependencias
RUN npm ci --only=production

# Copiar cÃ³digo
COPY . .

# Exponer puerto
EXPOSE 8080

# Variables de entorno por defecto
ENV NODE_ENV=production
ENV PORT=8080

# Comando de inicio
CMD ["node", "src/server.js"]
```

---

## ğŸ“ˆ ESCALABILIDAD Y PERFORMANCE

### Auto-Scaling en Cloud Run:

```
TRÃFICO BAJO (10 usuarios)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

     FRONTEND                BACKEND
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Instance 1  â”‚        â”‚  Instance 1  â”‚
â”‚  (Activa)    â”‚        â”‚  (Activa)    â”‚
â”‚              â”‚        â”‚              â”‚
â”‚  CPU: 10%    â”‚        â”‚  CPU: 15%    â”‚
â”‚  RAM: 50MB   â”‚        â”‚  RAM: 120MB  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Total instancias: 2
Costo/hora: ~$0.05


TRÃFICO MEDIO (50 usuarios)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

     FRONTEND                   BACKEND
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Instance 1  â”‚        â”‚  Instance 1  â”‚
â”‚  (Activa)    â”‚        â”‚  (Activa)    â”‚
â”‚  CPU: 60%    â”‚        â”‚  CPU: 70%    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚  Instance 2  â”‚
                        â”‚  (Auto-spawn)â”‚
                        â”‚  CPU: 40%    â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Total instancias: 3
Costo/hora: ~$0.12


TRÃFICO ALTO (150 usuarios)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

     FRONTEND                   BACKEND
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Instance 1  â”‚        â”‚  Instance 1  â”‚
â”‚  CPU: 80%    â”‚        â”‚  CPU: 90%    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Instance 2  â”‚        â”‚  Instance 2  â”‚
â”‚  CPU: 75%    â”‚        â”‚  CPU: 85%    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Instance 3  â”‚        â”‚  Instance 3  â”‚
â”‚  CPU: 70%    â”‚        â”‚  CPU: 80%    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚  Instance 4  â”‚
                        â”‚  CPU: 75%    â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Total instancias: 7
Costo/hora: ~$0.35


CONFIGURACIÃ“N ACTUAL:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Frontend:
- Min instancias: 0 (escala a cero)
- Max instancias: 10
- Target CPU: 60%
- Target Concurrency: 80 requests

Backend:
- Min instancias: 1 (siempre activo)
- Max instancias: 20
- Target CPU: 70%
- Target Concurrency: 100 requests
```

---

## ğŸŒ ARQUITECTURA GEOGRÃFICA

### Regiones y Latencia:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     DEPLOYMENT ACTUAL                       â”‚
â”‚                    (Single Region)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â˜ï¸  GOOGLE CLOUD
                    europe-west1
                    (Belgium)
                         â”‚
                         â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚               â”‚               â”‚
         â–¼               â–¼               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚Frontend â”‚    â”‚ Backend â”‚    â”‚Cloud SQLâ”‚
    â”‚Cloud Runâ”‚    â”‚Cloud Runâ”‚    â”‚MariaDB  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

LATENCIA APROXIMADA:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

EspaÃ±a (Madrid):        ~25-40ms   âœ… EXCELENTE
Francia (ParÃ­s):        ~30-50ms   âœ… EXCELENTE
Alemania (BerlÃ­n):      ~35-60ms   âœ… EXCELENTE
Reino Unido (Londres):  ~20-35ms   âœ… EXCELENTE
Italia (Roma):          ~50-80ms   âœ… BUENA
Portugal (Lisboa):      ~40-70ms   âœ… BUENA

AmÃ©rica del Norte:      ~150-200ms âš ï¸ ACEPTABLE
AmÃ©rica del Sur:        ~250-350ms âš ï¸ LENTA
Asia:                   ~300-450ms âŒ MUY LENTA


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ARQUITECTURA MULTI-REGIÃ“N                      â”‚
â”‚                  (RecomendaciÃ³n Futura)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â˜ï¸  GOOGLE CLOUD         â˜ï¸  GOOGLE CLOUD
    europe-west1            us-central1
    (Belgium)               (Iowa, USA)
         â”‚                       â”‚
         â”‚                       â”‚
    [Services]             [Services]
         â”‚                       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Global Load   â”‚
            â”‚   Balancer     â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚           â”‚           â”‚
         â–¼           â–¼           â–¼
    ğŸ‡ªğŸ‡¸ EspaÃ±a  ğŸ‡ºğŸ‡¸ USA    ğŸ‡§ğŸ‡· Brasil
    (20ms)     (30ms)     (150ms)

Mejora latencia global: +60%
Costo adicional: +100% (~$200/mes)
```

---

## ğŸ“Š MONITOREO Y OBSERVABILIDAD

### Stack de Monitoreo:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MONITORING STACK                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  APLICACIÃ“N          â”‚
â”‚  (Frontend/Backend)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ Logs, MÃ©tricas, Traces
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Cloud Logging       â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•     â”‚
â”‚  â€¢ Request logs      â”‚
â”‚  â€¢ Error logs        â”‚
â”‚  â€¢ Custom logs       â”‚
â”‚  â€¢ Structured JSON   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Cloud Monitoring    â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚  â€¢ CPU Usage         â”‚
â”‚  â€¢ Memory Usage      â”‚
â”‚  â€¢ Request Count     â”‚
â”‚  â€¢ Request Latency   â”‚
â”‚  â€¢ Error Rate        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Alerting            â”‚
â”‚  â•â•â•â•â•â•â•â•            â”‚
â”‚  â€¢ Email alerts      â”‚
â”‚  â€¢ SMS alerts        â”‚
â”‚  â€¢ Slack webhooks    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Dashboards          â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•          â”‚
â”‚  â€¢ Real-time metrics â”‚
â”‚  â€¢ Historical data   â”‚
â”‚  â€¢ Custom reports    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### MÃ©tricas Clave (KPIs):

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    KEY METRICS                            â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                           â•‘
â•‘  ğŸš€ PERFORMANCE                                           â•‘
â•‘  â•â•â•â•â•â•â•â•â•â•â•â•â•                                            â•‘
â•‘  â€¢ Request Latency (p50):        <300ms    âœ…             â•‘
â•‘  â€¢ Request Latency (p95):        <800ms    âœ…             â•‘
â•‘  â€¢ Request Latency (p99):        <2000ms   âœ…             â•‘
â•‘  â€¢ Time To First Byte:           <100ms    âœ…             â•‘
â•‘                                                           â•‘
â•‘  ğŸ“ˆ THROUGHPUT                                            â•‘
â•‘  â•â•â•â•â•â•â•â•â•â•â•â•                                             â•‘
â•‘  â€¢ Requests/second:              ~10-50    âœ…             â•‘
â•‘  â€¢ Peak requests/second:         ~100      âœ…             â•‘
â•‘  â€¢ Concurrent users:             ~20-50    âœ…             â•‘
â•‘                                                           â•‘
â•‘  ğŸ’ª AVAILABILITY                                          â•‘
â•‘  â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                           â•‘
â•‘  â€¢ Uptime (Ãºltimos 30 dÃ­as):     99.5%     âœ…             â•‘
â•‘  â€¢ Error rate:                   <1%       âœ…             â•‘
â•‘  â€¢ Success rate:                 >99%      âœ…             â•‘
â•‘                                                           â•‘
â•‘  ğŸ’¾ DATABASE                                              â•‘
â•‘  â•â•â•â•â•â•â•â•â•â•â•                                              â•‘
â•‘  â€¢ Query time (avg):             <50ms     âœ…             â•‘
â•‘  â€¢ Connection pool usage:        ~30%      âœ…             â•‘
â•‘  â€¢ Active connections:           5-15      âœ…             â•‘
â•‘                                                           â•‘
â•‘  ğŸ’° COST                                                  â•‘
â•‘  â•â•â•â•â•â•                                                   â•‘
â•‘  â€¢ Cloud Run (frontend):         ~$20/mes  âœ…             â•‘
â•‘  â€¢ Cloud Run (backend):          ~$50/mes  âœ…             â•‘
â•‘  â€¢ Cloud SQL:                    ~$30/mes  âœ…             â•‘
â•‘  â€¢ OpenAI API:                   ~$15/mes  âœ…             â•‘
â•‘  â€¢ Google Maps API:              ~$10/mes  âœ…             â•‘
â•‘  â€¢ Total estimado:               ~$125/mes âœ…             â•‘
â•‘                                                           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## ğŸ”„ DISASTER RECOVERY

### Plan de RecuperaciÃ³n:

```
NIVELES DE DISASTER RECOVERY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  NIVEL 1: SERVICIO CAÃDO (Frontend o Backend)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  RTO (Recovery Time Objective): 5 minutos              â”‚
â”‚  RPO (Recovery Point Objective): 0 (sin pÃ©rdida datos) â”‚
â”‚                                                        â”‚
â”‚  ACCIONES:                                             â”‚
â”‚  1. Cloud Run auto-restart (intentos automÃ¡ticos)      â”‚
â”‚  2. Si falla: Rollback a revisiÃ³n anterior estable     â”‚
â”‚     $ gcloud run services update-traffic ...           â”‚
â”‚  3. Verificar logs en Cloud Logging                    â”‚
â”‚  4. Notificar equipo DevOps                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  NIVEL 2: BASE DE DATOS CAÃDA                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  RTO: 15-30 minutos (si backup necesario)              â”‚
â”‚  RPO: MÃ¡ximo 24 horas (Ãºltimo backup)                  â”‚
â”‚                                                        â”‚
â”‚  ACCIONES:                                             â”‚
â”‚  1. Cloud SQL auto-restart (Google gestiona)           â”‚
â”‚  2. Si falla: Restore desde backup mÃ¡s reciente        â”‚
â”‚     $ gcloud sql backups restore ...                   â”‚
â”‚  3. Verificar integridad de datos                      â”‚
â”‚  4. Reiniciar servicios backend                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  NIVEL 3: REGIÃ“N COMPLETA CAÃDA (europe-west1)         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  RTO: 2-4 horas (si multi-regiÃ³n no implementado)      â”‚
â”‚  RPO: MÃ¡ximo 24 horas                                  â”‚
â”‚                                                        â”‚
â”‚  ACCIONES:                                             â”‚
â”‚  1. Deploy en nueva regiÃ³n (us-central1)               â”‚
â”‚  2. Restore BD desde backup a nueva regiÃ³n             â”‚
â”‚  3. Actualizar DNS a nuevas IPs                        â”‚
â”‚  4. Propagar cambios DNS (5-60 min)                    â”‚
â”‚  5. Verificar funcionamiento completo                  â”‚
â”‚                                                        â”‚
â”‚  PREVENCIÃ“N RECOMENDADA:                               â”‚
â”‚  âœ… Multi-regiÃ³n deployment                            â”‚
â”‚  âœ… Cloud SQL High Availability                        â”‚
â”‚  âœ… Global Load Balancer con failover automÃ¡tico       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¦ COMPONENTES DEL SISTEMA

### Frontend (React):

```
frontend/
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ index.html
â”‚   â””â”€â”€ favicon.ico
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ Login.jsx
â”‚   â”‚   â”œâ”€â”€ Dashboard.jsx
â”‚   â”‚   â”œâ”€â”€ TicketForm.jsx
â”‚   â”‚   â”œâ”€â”€ TicketList.jsx
â”‚   â”‚   â”œâ”€â”€ TicketDetail.jsx
â”‚   â”‚   â”œâ”€â”€ ChatbotWidget.jsx
â”‚   â”‚   â”œâ”€â”€ TicketsMap.jsx
â”‚   â”‚   â”œâ”€â”€ QRGenerator.jsx
â”‚   â”‚   â””â”€â”€ LocationCapture.jsx
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ apiRequest.js
â”‚   â”‚   â””â”€â”€ auth.js
â”‚   â”œâ”€â”€ App.jsx
â”‚   â””â”€â”€ main.jsx
â”œâ”€â”€ package.json
â”œâ”€â”€ vite.config.js
â””â”€â”€ Dockerfile
```

### Backend (Node.js):

```
backend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”œâ”€â”€ auth.js
â”‚   â”‚   â”œâ”€â”€ tickets.js
â”‚   â”‚   â”œâ”€â”€ users.js
â”‚   â”‚   â”œâ”€â”€ chatbot.js
â”‚   â”‚   â””â”€â”€ analytics.js
â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â”œâ”€â”€ auth.js
â”‚   â”‚   â”œâ”€â”€ rateLimiter.js
â”‚   â”‚   â””â”€â”€ errorHandler.js
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ User.js
â”‚   â”‚   â”œâ”€â”€ Ticket.js
â”‚   â”‚   â”œâ”€â”€ TicketComment.js
â”‚   â”‚   â””â”€â”€ TicketHistory.js
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ database.js
â”‚   â””â”€â”€ server.js
â”œâ”€â”€ package.json
â””â”€â”€ Dockerfile
```

---

## ğŸ¯ ARQUITECTURA IDEAL FUTURA

### Mejoras Recomendadas:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               ARQUITECTURA OBJETIVO (v4.0)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â˜ï¸  GOOGLE CLOUD PLATFORM

        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚    Global Load Balancer + CDN          â”‚
        â”‚    (Latencia global optimizada)        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚               â”‚               â”‚
        â–¼               â–¼               â–¼
  [europe-west1]  [us-central1]  [asia-east1]
        â”‚               â”‚               â”‚
        â”‚               â”‚               â”‚
    Frontend        Frontend        Frontend
    Backend         Backend         Backend
        â”‚               â”‚               â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Cloud SQL      â”‚
              â”‚  (Multi-Region) â”‚
              â”‚  HA Enabled     â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Redis          â”‚
              â”‚  (Memorystore)  â”‚
              â”‚  Rate Limiting  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Cloud Storage  â”‚
              â”‚  (Archivos)     â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Pub/Sub        â”‚
              â”‚  (Event Queue)  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

MEJORAS CLAVE:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… Multi-regiÃ³n (latencia global -60%)
âœ… Redis para rate limiting (escala infinita)
âœ… CDN para assets (latencia -70%)
âœ… High Availability DB (uptime 99.95%)
âœ… Pub/Sub para eventos (desacoplado)
âœ… Cloud Storage para imÃ¡genes (escalable)
âœ… WebSockets (notificaciones real-time)

COSTO ESTIMADO: ~$300/mes (+140%)
MEJORA PERFORMANCE: +200%
MEJORA UPTIME: +0.45%
```

---

**Fin de Arquitectura y Diagramas**

**Documento creado:** 24/01/2026 02:00 UTC  
**Ãšltima actualizaciÃ³n:** 24/01/2026  
**VersiÃ³n:** 3.0  
**RevisiÃ³n:** 1.0
